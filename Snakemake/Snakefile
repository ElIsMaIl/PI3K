configfile: "config.yaml"
print (config['samples'])
reads = ['R1','R2']
nums = ['1','2','3','4','5','6','7','8']
fastq_file_extension = _001.fastq

rule all:
    input:
        expand(["$TMPDIR/fastqc/{sample}"),
        #expand("$TMPDIR/{sample}_{num}_cleaned.fastq", sample=config["samples"], num=nums),
        #expand("$TMPDIR/{sample}_{num}_out_%.sam", sample=config["samples"], num=nums)

rule fastqc:
    input:
        sample =

#rule bbsplit:
    input:
        sample = lambda wildcards: f"{config['samples'][wildcards.sample]}_{wildcards.num}.fastq"
#    output:
        R_cleaned=expand("$TMPDIR/{{sample}}_{{num}}_cleaned.fastq"),
        sam=expand("$TMPDIR/{{sample}}_{{num}}_out_%.sam")
#    shell:
        """     
        cd $TMPDIR
        bbsplit.sh in={input} \
        minratio=0.56 minhits=1 maxindel=16000 \
        basename={output.sam} out={output.R_cleaned} ambig2=all \
        """





